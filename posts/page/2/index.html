<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Posts | </title>
<meta name="keywords" content="">
<meta name="description" content="Posts - ">
<meta name="author" content="">
<link rel="canonical" href="/posts/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.3613efbd0b1772781e8f49935e973cae632a7f61471c05b17be155505ccf87b5.css" integrity="sha256-NhPvvQsXcngej0mTXpc8rmMqf2FHHAWxe&#43;FVUFzPh7U=" rel="preload stylesheet" as="style">
<link rel="icon" href="favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" href="apple-touch-icon.png">
<link rel="mask-icon" href="safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" type="application/rss+xml" href="/posts/index.xml">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Posts" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="/posts/" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Posts"/>
<meta name="twitter:description" content=""/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Posts",
      "item": "/posts/"
    }
  ]
}
</script>
</head>

<body class="list" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main"> 
<header class="page-header">
  <h1>
    Posts
  </h1>
</header>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>什么是Diffusion模型
    </h2>
  </header>
  <div class="entry-content">
    <p> 什么是Diffusion模型 这是一篇关于 What are Diffusion Models的译文。很多地方借鉴了由浅入深了解Diffusion Model
本文主要是介绍什么是DDPM：Denoising Diffusion Probabilistic Models(DDPM; Ho et al. 2020).
Basic Knowledge </p>
  </div>
  <footer class="entry-footer"><span title='2022-09-14 18:59:19 +0000 UTC'>September 14, 2022</span></footer>
  <a class="entry-link" aria-label="post link to 什么是Diffusion模型" href="/posts/what-are-diffusion/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>The Psychology Of Money
    </h2>
  </header>
  <div class="entry-content">
    <p>No One’s Crazy We all do crazy stuff with money,because we’re all relatively new to this game and what looks crazy to you might make sense to me. But no one is crazy - we all make decisions based on our own unique experiences that seem to make sense to us in a given moment. Luck &amp; Risk Nothing is as good or as bad as it seems Luck and risk are both the reality that every outcome in life is guided by forces other that invividual effort....</p>
  </div>
  <footer class="entry-footer"><span title='2022-09-03 11:07:34 +0000 UTC'>September 3, 2022</span></footer>
  <a class="entry-link" aria-label="post link to The Psychology Of Money" href="/posts/the-psychology-of-money/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>《纳瓦尔宝典》读书笔记
    </h2>
  </header>
  <div class="entry-content">
    <p>最近看完了《纳瓦尔宝典》这本小册子，本文主要是关于该书的一些书摘和笔记。
关于财富 积累财富 要想获得财富，你就必须知道做什么，和谁一起做，什么时候做。与埋头苦干相比，更重要的是理解和思考。
追求财富，而不是金钱或地位。
依靠出租时间是不可能致富的。你必须拥有股权，才能实现财务自由
为社会提供其有需求但无从获得的东西，并实现规模化。
选择一个长期发展前景的行业，找到可以长期合作的人。
培养迭代思维。生活中所有的回报，无论是财富，人际关系，还是知识，都来自复利。
要想获得财富，就必须充分利用杠杆效应。商业杠杆来自资本，劳动力和复制边际成本为零的产品（代码和媒体）
杠杆有三种。第一种是劳动力杠杆 资本市第二种相对较好的杠杆形式 最后一种是最新出现的，也是普通人最触手可及的。这种杠杆就是“复制边际成本为零的产品”。其中包括书籍，媒体，电影，代码。 劳动力杠杆就是让别人为你工作。这是最古老，争夺最激烈的一种杠杆。
杠杆是判断力的倍增器。
学习微观经济学，博弈论，心理学，说服术，伦理学，数学和计算机。
读比听快，做比看快。
如果想变得富有，就要弄清楚能为社会提供哪些其有需求但无从获得的东西，而提供这些东西对你来说又是轻松自然的事情，在你的技术和能力范围内。
只有独辟蹊径，才能避开竞争
在成为自己这个方面，没人能比你做得更好。
出发点并不重要，行为本身才重要
勇于以个人名义承担商业风险。社会将根据责任，股权和杠杆效应回报你。
明确的责任分配非常重要。没有责任，就没有动力。
实际上，那些有能力以个人名义在公众面前承担失败风险的人，会获得很大的原动力。
失败真的没有那么可怕，所以我们都应该勇于承担更多责任。
拥有企业股权是致富的关键所在
真正的财富是通过创建公司或者通过投资创造出来的。真正的财务自由都不是靠单纯地投入大量时间来实现的。
想要打造良好的职业基础，就要追随自己真正的求知欲上下求索，而不是盲目跟风眼下赚钱的热门行业
生命的意义在于专注于事情本身，体验过程，享受当下。
认真想一想，社会上还有哪些尚未得到满足的需求，而你怎样才能成为第一个提供相关产品或服务的人，并将其规模化。这才是赚钱真正的挑战。
人生的一大目标应该是掌控自己的时间。
增强判断力 在前进的过程中，方向比速度更重要
人生就是选择正确的方向，然后朝这个方向奋力前行。
我认为最聪明的人是可以把事情深入浅出地给孩子讲解清楚的人，否则他自己也没有真正理解。
痛苦的定义：当你看到事物的真面目不是你本来想要的样子时，你是痛苦的。
留出空闲时间非常重要。
在一个动态的系统中，没有一劳永逸的解决方案。
决策就是一切
越觉得自己无所不知，规避和处置风险的方法越少
如果难以抉择，那答案就是否定的 我们生活在一个有70亿人口的星球上，我们和互联网上的每个人都相互连接，世界上有成千山万的职业供我们选择。大千世界，芸芸众生，选择永远不缺。有时我们实在难以抉择，甚至需要列出清单，对不同选项的利弊进行对比和权衡。选择放弃吧，如果难以选择，答案即使否定的。
一条简单的人生经验：如果在一个艰难的决定上意见不统一，你就应验选择短期内更痛苦的道路。
简历新的心智模型做有效的方式是：海量阅读，多多益善。每天花一个小时阅读科学，数学和哲学类书籍，7年内，你就可能跻身少数的成功人士之列。
我不想什么书都读，我只想把100本好书读上一遍又一遍
阅读是我一生中所有物质和精神层面所取得的成就的来源。
读书时感受到的困惑，就像运动时感受到的肌肉酸痛。阅读是在锻炼精神的肌肉，运动是在锻炼身体的肌肉。
第二部分 幸福 学习幸福 对我来说，幸福的含义主要是没有痛苦，没有欲望，不沉溺于对未来或过去的思考，真正拥抱当下，拥抱现状，拥抱现实的一切。
人生转瞬即逝，如黑夜中的萤火虫。尘世光阴等刹那，白驹过隙一瞬间。活着就是要充分利用每一分钟。“充分利用”不是说要穷尽所有时间去追逐一些愚蠢的欲望，而是要认识到自己在这个星球上的每一分每一秒都是非常宝贵的。生而为人，就有责任确保自己的幸福，确保用最好的方式诠释万事万物。
理性很强的人可以通过训练自己的无感反应获得平和，即学会漠视自己无法控制的事情。
在任何时候（比如走路的时候），大脑都只有很小一部分是关注当下的。大脑把主要精力用于规划未来或悔恨过去。
既往不恋。人之所以感到痛苦，很多时候是因为拿以往和现在做比较。以往种种未能实现的欲念会带来现在的缺憾感，而我们又将弥补现实缺憾的希望寄托于未来。消除缺憾感会让人更容易活在当下。
思考的间隙即开悟。
你有没有想过，现在的生活可能就是上帝承诺给你的天堂，而你却毫不珍惜，肆意挥霍。
幸福就是内心的平和。
沉迷于对外物的“欲望”。我对外部事物会带给我幸福和快乐的执念其实是一种痴念。
人生的大赢家就是同时拥有时间、健康和金钱。
布莱士·帕斯卡说过：“人之所以有烦恼，是因为他不能独自安静地在一个房间里坐着。”如果你能坐上30分钟，同时保持幸福的心境，你就是成功的。这是一种超然物外的境界，不过极少有人能做到。
**生活是一场单人游戏。人独自出生，独自死亡，独自解读人世间的一切。你的记忆只属于你一个人。**你出生前无人在意，你离开人世后也无人在意，你存在于人世间只是短短几十年，人生就是一场单人游戏。
如果不想和一个人共事一生，那就一天都不要和他共事。
这个世界是一面镜子，会把你的感受反射给你。
看屏幕的时间越长，幸福感越低；看屏幕的时间越短，幸福感越高。
政治、学术和社会地位都是零和游戏。正和游戏才能造就积极向上的人。
改变习惯的步骤：首先，知道自己要做什么；其次，知道该怎么做；再次，把规划告诉朋友，让一致性偏见发挥作用；最后，严格自律，知行合一，进行自我重塑，直至蜕变成全新的自己。
**死亡是人的一生中最重大的事情。**人终有一死，选择正视、承认死亡而不是逃避死亡，将赋予人生巨大的意义。我们在一生中会花费大量时间试图逃避死亡。我们的很多奋斗目标都可以归结为对永生的追求。
相对于宇宙，你就像一只在夜空中闪烁的萤火虫，你的生命转瞬即逝。如果能彻底认识到你所做的一切不过是徒劳，你就能获得巨大的幸福感和平和感，因为你会意识到，生命不过是一场游戏。但生命是一场有趣的游戏。在这场游戏中，唯一重要的事情就是，随着生命的展开，你要不断地体验现实。既然如此，你为什么不以最积极的方式去诠释自己经历的一切呢？
相对于宇宙，你就像一只在夜空中闪烁的萤火虫，你的生命转瞬即逝。如果能彻底认识到你所做的一切不过是徒劳，你就能获得巨大的幸福感和平和感，因为你会意识到，生命不过是一场游戏。但生命是一场有趣的游戏。在这场游戏中，唯一重要的事情就是，随着生命的展开，你要不断地体验现实。既然如此，你为什么不以最积极的方式去诠释自己经历的一切呢。...</p>
  </div>
  <footer class="entry-footer"><span title='2022-08-21 15:28:23 +0000 UTC'>August 21, 2022</span></footer>
  <a class="entry-link" aria-label="post link to 《纳瓦尔宝典》读书笔记" href="/posts/the-almanack-of-naval-ravikant/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>2022 上半年
    </h2>
  </header>
  <div class="entry-content">
    <p>新冠封城 农历新年大概在每年公历的2月中旬，我们中国人过完农历新年，一年才算开始。从2月中旬，到6月底，大概4个半月，生活在上海的人，因为新冠奥密克戎病毒的爆发，被迫居家隔离3个月。冬天被关起来，夏天“有序”放出来之后，发现一年已经过去了一半。
但即便距离6.1号解封已经过去一个月，生活里还是充斥着新冠，所有人在任何场合都带着口罩，去任何场所都要扫码，三天就要主动核酸一次，以便能够去公司上班，每个礼拜小区又会组织“大筛”，你也得参加，不然进不去家门，街上不开放堂食，不开放公共运动场所，不能去外地，仿佛只需要维持一个基本的上班-下班，创造剩余价值就可以是生活的全部。
工作 22年上半年，悬在互联网从业者头上的剑是裁员，因为经济下行，以及打击平台垄断等原因，各种互联网公司纷纷开始裁员，裁员幅度有的10%，有的20%，甚至有些裁员50%。我们这些从业者，身处其中，自然也受到了各种影响，整个人会处于一种很紧张的状态，对未来的预期也降到了最低。眼下，大家对未来的期望，可能也就只有先苟住，保住现在的工作，静静地等待春暖花开之时，再谋求新发展。
现在市面上有一种说法是我们过了发展的红利期，人口也开始老年化，接下来要在存量上谋发展。我自己是非常讨厌存量优化这种说法的，一是存量本来就应该优化（所有的科学发明，工程研发都是通过不断的迭代一步一步研究出来的），二是发展遇阻，就说是过了发展期，要优化存量，这怎么看都是一种典型的不是我能力不够，是时代的问题的甩锅行为。存量优化的说法放到个人身上当然可以理解，但放到一个巨型组织，就显得胸无大志，话术意图明显。乔布斯，比尔盖茨，马斯克，我想这些人是不会说我们现在处在存量时代，优化存量，这太扯了。
生活 三个月的封禁，生活自然只能全靠向内。 数了下，上半年看了20部电影，疫情在家有时间把李沧东的作品全都找来看了一遍；可能是因为李电影里面的场景和我们这里的城乡有点像，李电影里面的人物和我们在文化习性上相似性也比较高，加上李电影的艺术性，在疫情期间给了我一段很好电影体验时光。这些电影里面，印象最深的是《诗》，电影讲述一件发生在外婆和外孙之间的故事，故事波澜不惊，平淡如水，很难说为什么这部电影让我产生最多的连接，也许是外婆的个人魅力，人到古稀还保持诗性的不易让人感动，也许是故事有条不紊的节奏，个中原因很难描述。
此外还看了七本书，而且是都是五月份之前看的，后面两个月可能是因为疫情向好，工作也比较忙吧，看的比较少。上半年最推荐的书是《卡拉马佐夫兄弟》，另外项飙老师的《把自己作为方法》也非常推荐
军训时我就知道，跟排长、连长套关系，决定了下一周基本的物质福利，即使不决定物质福利，也决定了心理上那种服从感，是荣耀和尊严的来源，所以心思都花在如何讨好他上面，人就变得非常紧张。
这句话我经常偷懒拿来解释各种各样的社会乱象。
疫情期间，我把音乐软件换成了Spotify，看视频用YouTube，不看知乎，微博，取关twitter上中文博主，这些操作都让幸福感有所提升。特别是Spotify，比国内的一众音乐软件真是好太多。多说一句，对比telegram和微信，国内的各种文档和Google doc，只能说我们这个行业确实也还处在初级阶段，抄都抄不明白。
22年盛夏到了，换换心情，上路吧。</p>
  </div>
  <footer class="entry-footer"><span title='2022-07-03 14:41:02 +0000 UTC'>July 3, 2022</span></footer>
  <a class="entry-link" aria-label="post link to 2022 上半年" href="/posts/2022-h1/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>疫情解封
    </h2>
  </header>
  <div class="entry-content">
    <p>2022.6.1，上海持续两个多月的封城解封了，从3.13我所在的小区被封，到6.1号，小区全面解封，我们被关在小区里面大概前后有接近80天。这一段很特别的经历，我从刚开始的不适应，心情烦躁不安，到慢慢开始接受，接受封控生活，接受团购买菜，接受早起核酸，接受白天不出门，接受每天自己做三餐。
人，确实是一个惯性生物，只要习惯了，就能过下去，至少我们是这样，我是这样。
接近三个月的封控，我们从早春过度到了初夏，楼栋前面的水杉树，也从光秃秃变的郁郁葱葱，挡住了远处的中环，让我无法在家中通过观察中环的车流量来判断疫情的形势。
封控生活中，也不是没有收获，节省了上下班的通勤时间，以及规避了办公室的噪杂，我有更多的时间可以和自己相处。每天晚上10：30之后，我会在小区的小树林里面，独自散步，有时候会听一点Alexis Ffrench，有时候会什么都不听。
小三个月的封控生活的所获：
这三个月，我戒掉了吸烟的习惯，不吸烟之后，人的状态会好一些，身体会觉得轻盈一些。
戒烟的最大要素，是戒烟期间不要有人劝你抽一根 戒烟的第二条是，即便戒烟期间，抽了一根之后，不要觉得自己戒烟失败了，继续戒下去，戒除心瘾。 去年6月因为打球导致腰部膨出压迫神经导致腰疼，因为各种因素一直没有进行系统的康复，身体状态不太好。疫情居家期间，通过有耐心的，每天康复锻炼，腰部情况也竟然得到了一些改善。这类需要通过运动的康复训练，总结下来就是要坚持，一开始并不会得到立竿见影的效果，但是通过长时间的坚持，回过头来，就发现症状的确得到了不小的改善。我是大概疫情居家一个月的时候，开始尝试这类型的康复，每天坚持康复15分钟左右，现在情况也得到了改善。持续了快一年的腰疼，也让我再一次非常真实的感受到身体健康是生活的根本。
三个月的居家工作，时间多了一些，感谢自己没有用这些时间来打游戏。不打游戏，这个的确也蛮重要的，游戏的确会让人失去很多时间。
自从我不打游戏以及吸烟之后，就节省了一些时间，这些时间也成了万能借口：
看剧一小时，“嗨，就当排位了”； 看书一下午，“嗨，就当排位了”； 刷题两小时，“嗨，就当排位了”； 或许每个人也应该有类似的不打游戏的时间，又或者我应该把其他类似游戏这类杀时间的活动戒断掉。
解封后，端午节的时候，爸爸来我这儿，午饭后，他在屋子里睡了2个多小时的午觉，我带他去买的新房子工地上看了看，他在那条路上抽了好几根烟。这些年和父母交流其实蛮少的，中午吃饭的时候，发现爸爸的酒量，饭量已经没有我大了。We’re losing too much time.</p>
  </div>
  <footer class="entry-footer"><span title='2022-06-12 14:41:23 +0000 UTC'>June 12, 2022</span></footer>
  <a class="entry-link" aria-label="post link to 疫情解封" href="/posts/life-under-covid-19-2/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>理解 Disco Diffusion
    </h2>
  </header>
  <div class="entry-content">
    <p>Disco Diffusion Disco Diffusion是 github 上面一个开源项目，用户通过该项目输入一段文字便可以生成一张和文字有一定相关性的图片，且图片有一定的艺术性。Disco Diffusion 是基于OpenAI Guided Diffusion 项目基础上做的研发。其中 disco 是该项目jupter notebook的名称。
Disco Diffusion项目中的diffusion模型使用的是Katherine Crowson提供的，他利用获得的artstation网站上的数据集，在OpenAI 512x512模型上进行fine-tuned，得到disco diffusion中的diffusion模型。Disco Diffusion项目中还利用OpenAI的另外一篇工作CLIP，通过CLIP来关联Image和Text，使得生成的图片具有prompt text的语义信息。
Disco Diffusion演进过程中的主要优化点：
优化了augmentation，以及把 timestep 从1000压缩到15-100个 timestep 使用较短的运行时间，并且提升了diffusion的生成质量 一次性加载多个CLIP模型，多个CLIP模型可以提高生成图accuracy 要理解Disco Diffusion的工作原理，需要先了解DDPM，Guided Diffusion，以及CLIP几个模型的工作原理。
Diffusion模型与DDPM 扩散模型包括两个过程，从信号逐步到噪声的扩散（正向）过程/（diffusion/forward process） 和从噪声逐步到信号的 逆向过程（reverse process）。这两年的扩散模型基本都是基于Google的DDPM (Denoising Diffusion Probabilistic Model)框架所设计。
逆向过程 逆向过程从一张随机高斯噪声图片 xT 开始，通过逐步去噪生成最终的结果 x0。这个过程是一个Markov Chain，可以被定义为：
这个过程可以理解为，我们根据 xt 作为输入，预测高斯分布的均值和方差，再基于预测的分布进行随机采样得到 xt-1 。通过不断的预测和采样过程，最终生成一张真实的图片。
正向/扩散过程 扩散过程采用的是一个固定的 Markov chain 形式，过程中逐步向图片添加高斯噪声：
在DDPM中，βt 是预先设置的定值参数。扩散过程的一个重要特性是可以直接采样任意时刻t下的加噪结果 xt 。将
可以得到
这个封闭式的公式使得我们可以直接获得任意程度的加噪图片，方便后续的训练。
模型训练 为了实现基于扩散模型的生成，DDPM采用了一个U-Net结构的Autoencoder来对t时刻的噪声进行预测。网络训练时采用的训练目标非常简单：
此处ε是高斯噪声。噪声预测网络输入是加噪图片，目标是预测所添加的噪声。训练目标是希望预测的噪声和真实的噪声一致。最终在DDPM中，均值μ的定义为
在DDPM中，逆向过程中的高斯分布的方差项采用的是一个常数项。
Guided Diffusion - 基于类别引导的扩散模型 类似于conditional-GAN，对于通用图像生成任务，加入类别条件能够比无类别条件生成获得更好的效果。因为加入类别条件的时候，实际上是大大减少了生成时的多样性。OpenAI的Guided Diffusion提出一种简单有效的类别引导的扩散模型生成方式。...</p>
  </div>
  <footer class="entry-footer"><span title='2022-06-04 10:47:55 +0000 UTC'>June 4, 2022</span></footer>
  <a class="entry-link" aria-label="post link to 理解 Disco Diffusion" href="/posts/understanding-disco-diffusion/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>《贪婪的多巴胺》读书笔记
    </h2>
  </header>
  <div class="entry-content">
    <p>多巴胺，英文dopamine或者DA，是一种重要的神经递质，主要负责大脑的情欲，感觉，将兴奋及开心的信息传递。与上瘾有关。 - wikipedia
前段时间阅读了《贪婪的多巴胺》一书，本文整理记录下关于这本书的一些读书笔记。
什么在掌握大脑 我们为什么要去工作，为什么要赚钱，为什么要写这篇文章？最终的目的是什么？ 有哪件我们追求的事只为了它本身，而不是为了其他事？亚里士多德认为这件事是真实存在的。他认为在每一串“为什么”的终点都是同一件事，它的名字叫幸福。我们所做的一切，最终都是为了获得幸福。
但本书不是这么认为的，每一串的“为什么”，在作者看来，他背后是受多巴胺的影响。
赢是为了不输 书中举例环法七冠王阿姆斯特丹（后被查出用药，取消了冠军头衔）
仅仅赢得环法自行车赛是不够的，赢得两次甚至七次也是不够的。胜利永远不嫌多，对多巴胺来说没有什么是够的。追求才是一切，胜利也是，终点线是不存在的，永远也不会有。胜利就像毒品一样，会让人上瘾。
这和我们在打moba类游戏的时候一摸一样，无论是Dota，还是王者荣耀。一局游戏和对方PK，各种操作之后，终于上到敌方高地，很兴奋，很开心，而刚推完水晶那一刻，胜利的喜悦感就突然消失了。大脑迫不及待就要开始下一把。赢完这一把，就想着开下一把，我要一直赢下去。那什么时候是个头，不知道。 而像英雄联盟，王者荣耀这类游戏的设计者，在游戏里面都引入了段位排位机制，这又大大加强了成瘾性。玩游戏的人都想有个好的排名，好的段位，来证明自己的实力。而很多那种再赢一把我就王者的局，也就是晋级赛中，系统又会特意给你匹配一些实力不高的队友，或者实力很强的对手，让你晋级卡住，继而要花费更多的时间在游戏中，去取得一个好的排名。赢一把就睡，往往那一把要出现在凌晨的三点。
另外一个这两年成瘾性也很强的产品是短视频，我自己不算短视频的消费者。不过就我观察来看，短视频的确普及程度，和成瘾性也很强。短视频除了大家都知道的“强大”的推荐算法之外，还有个特点，就是他会可以让人做到完全不跟自己相处，排队，走路，等公交，任何时刻，只要你觉得无聊了，就可以拿起手机刷起来。
暴力有时是功能障碍或病理状态的结果。但大多数情况下，暴力是一种选择——一种经过深思熟虑而采取的，以胁迫手段获得你想要的东西的方式。
多巴胺能人格： 他们沉迷于让未来更有价值，而牺牲了现在能够体验到的快乐。
当在混乱中需要有人大胆行动时，那些能够保持冷静、盘点可用资源，并迅速制订行动计划的人就能够渡过难关。
掌控的力量 神经递质多巴胺是欲望（通过欲望回路）和坚韧（通过控制回路）的来源，它为我们提供了指引方向的激情，也提供了让我们到达目的地的意志力。
意志力就像一块肌肉，用过之后会疲劳，可能用不了多久，它就放弃了。
“抵制诱惑似乎产生了一种心理代价，这种代价体现为，参与者之后在面对挫折时更容易放弃。”如果你在节食，抵制诱惑的次数越多，下次你越有可能失败。意志力是一种有限的资源。
因为上海疫情，我所在的小区已经被封闭了接近3个月了，封城的不便这里不多说。小区封闭也有一个好处，就是我趁这段时间，把吸烟的习惯改掉了。近些年，我断断续续尝试过戒烟，但每次尝试了一两周之后，有时候甚至是一天之后，就复吸了。这次能3个月不复吸，一个很重要的因素是少了很多诱惑，虽然小区里面也有卖烟的，但不像之前街上到处都是卖烟的，给人的诱惑那么大。
天才与疯子 “当我身处一个与故乡截然不同的国家时，我会注意到更多的事物。就好像我吃了一种能改变思维的药，它能让我看到我通常会错过的东西。这让我感到自己更真切地活着。”在熟悉新环境的过程中，我们不断调整，并最终掌控了它。我们把会影响我们和不会影响我们的东西分开，重启潜在抑制，使自己在新的环境中感到舒适和自信。我们得以再次把本质和非本质分开。
或许这才是旅行的意义
很多人都有过从梦中醒来的经历，感觉自己好像被夹在两个世界之间。在这种状态下，他们的思维更加流畅，从一个话题跳到另一个话题，不受逻辑规则的约束。
工作初期，有时候也会带着问题睡觉，醒来之后，有时候会觉得找到的解法。
极其聪明、成功和极富创造性的人，也就是那些典型的多巴胺丰富的人通常会表达一种奇怪的情绪：他们对人类充满激情，但对个人却没有耐心：
自由与保守 自由主义者相关联：爱冒险、追求刺激、易冲动和权威主义，这些恰好也是多巴胺升高的特征。
500名自由主义者在街上游行，可能是在举行抗议活动。但如果是保守主义者的话，就更有可能是一场庆祝活动。
从历史上看，扭转权力扩张的唯一途径是用革命形式的剧变取代渐进式的变化。
进步 人类基因组的一个不寻常特征是人与人之间的变异要少得多。这种高度的遗传相似性表明，我们的祖先其实是一小群人。事实上，在我们进化史的早期，某些未知事件毁灭了大部分人类，使人口减少到不足2万人，濒临灭绝的风险。
变化越大，压力就越大。 压力不利于人体健康。事实上，压力是致命的。压力会增加患心脏病、睡眠质量降低、消化系统出问题和免疫系统受损的可能性。它也会引发抑郁，而抑郁会导致缺乏精力、丧失动力、绝望、轻生念头，甚至干脆放弃，所有这些都会影响生存。在我们的祖先中，对压力敏感的人在面对变化很大的环境时会难以从环境中获取资源。他们可能打猎不太成功，采集生产力较低，这使得他们很难争夺到配偶，有时他们甚至来不及生育后代就死去了。
给自己解压很重要。
一切都取决于环境。在熟悉的环境中，社会合作最为重要，高多巴胺能基因变得不那么常见，因为相对于多巴胺水平更为平衡的人，拥有这些基因的人的生存和求偶优势都偏弱。但是，当一个部落发现并进入未知世界时，赋予一个人更活跃的多巴胺系统的基因就成为一种优势，并且随着时间的推移变得越来越普遍。
“人生成功与否，是由我们无法控制的力量决定的吗？”在德国有72%的人同意这个说法，在法国为57%，在英国为41%。不过，只有略多于1/3的美国受访者表示，主导成功的是外部因素，而大多数人则持更为多巴胺能的观点。
中国有三分天注定，七分靠打拼的说法，中美两国人民有一些价值观还真挺像的。
多巴胺使我们的生活节奏越来越快，这就要求我们的教育也要跟得上。以前受过大学教育就能做的工作，如今需要研究生学位才能做了。我们的工作时间更长，还有更多的备忘录要读，报告要写，电子邮件要回复。一切都在不停地运转。领导、同事、客户默认我们从白天到黑夜都一直有空。当工作中有人需要我们时，我们必须立即做出回应。广告上一个微笑的男人在沙滩上回复短信，或者一个女人在酒店游泳池旁检查她的手机屏幕，点击她空荡荡的房子里的监控视频。“真是松了一口气！”15分钟前她最后一次检查，一切安好，仿佛一切都在她的控制之下。
和谐 普通人怎样才能找到平衡？任何人都不太可能放弃现代世界，与一个崇拜树木的部落生活在一起。我们必须通过其他方式找到平衡。单靠多巴胺永远不能满足我们，它不能提供满足感，就像锤子不能转动螺丝一样。但它不断给我们美好的承诺，让我们感觉满足感就在眼前：再来一个甜甜圈，再升一次职，再征服一次。我们怎么从跑步机上下来？
书中的答案是： 擅长一件事的乐趣
精通是从特定环境中取得最大回报的能力。精通是一件值得期待和追求的好事，但它不同于其他好事。它不仅仅是寻找食物和新的合作伙伴，或者击败竞争对手，它比这些更宏大、更普遍。它是我们成功提取奖励的过程：多巴胺达到了多巴胺的目标。
最好的享受就是沉浸在一份干得好的工作中。
精通也创造了一种心理学家称之为“内部控制点”的感觉。它指的是一种认为自己的选择和经历在自己的掌控之下，而不是被命运、运气或其他人决定的倾向。
内部控制点意识强的人更有可能在学业上取得成功和获得高薪工作。
能够通过向外转移关注焦点来激活我们的当下神经系统，注意力的增加就会使感觉体验更加强烈。想象一下在异国他乡的街道上行走，一切都令人兴奋，即使是看普通的建筑物、树木和商店。因为我们处在一个新的环境中，感觉输入更加生动，这正是旅行的部分乐趣来源。特别是在复杂环境（有时被称为“丰富环境”）中，能使我们大脑中的多巴胺能认知功能更好地工作。而最复杂、最丰富的环境，通常是自然环境。
全神贯注可以提升几乎一切体验。
多重任务处理并没有提高你的效率，反而降低了效率。
创造是最持久的多巴胺能的乐趣，因为它总是新的。烹饪、园艺和运动等众多活动都可以将智力刺激与体力活动结合起来，改善我们的心情并使我们更有成就感。这些活动可以持续一辈子而不会过时。买一块昂贵的瑞士手表，你也许能感受到几周的多巴胺能刺激，但在那之后，它就只是一块手表而已了。晋升为地区经理一开始会让上班很兴奋，但最终却成了同样老旧的苦差事。创造力则与此完全不同，因为它把当下分子和多巴胺搅在了一起。这就像把少量的碳和铁混合制成钢，让材料变得更强大、更耐久。这就是当你开始从事当下的体力活动时，多巴胺能的快感会发生的变化。
这或许是写作的原因之一。
以上</p>
  </div>
  <footer class="entry-footer"><span title='2022-05-28 18:58:57 +0000 UTC'>May 28, 2022</span></footer>
  <a class="entry-link" aria-label="post link to 《贪婪的多巴胺》读书笔记" href="/posts/the-molecule-of-more/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>《把自己作为方法》读书笔记
    </h2>
  </header>
  <div class="entry-content">
    <p>现在要通过一切手段来自保，不允许任何人说话。
第一次知道项飙老师是在《得意忘形》的一期播客中听到的，那一期节目，主播请来了淡豹女士录一期节目，淡豹在聊天的过程中提到了人类学家项飙。第二次了解项飙老师是通过《十三邀》，许知远邀请来了项飙老师做节目。那期节目我看了两三遍，特别是他们在温州的那一段聊天，反复观看，觉得项飙老师特有意思。
《把自己作为方法》是我看的项飙老师的第二部作品，第一部是《浙江村》。《把自己作为方法》这本书主要是提问者吴琦和项飙老师分别在牛津，北京，温州三个地方对谈，过程中吴琦会就一些问题向项飙老师发起的提问。虽然全文都是谈话的形式，但项飙老师对一些问题的看法是很有深度，也很透彻。书中两位在交流的时候，项飙老师的一些回答，会让我很亲切，有一些想法也会让我之前一些模糊的，不成系统的直觉，通过项飙老师以一个比较概括的方式描述出来。
下面是关于这本书的一些自己的摘录。
比如关于国内社会的人际关系，工作关系，社会关系，这一段描述：
军训时我就知道，跟排长、连长套关系，决定了下一周基本的物质福利，即使不决定物质福利，也决定了心理上那种服从感，是荣耀和尊严的来源，所以心思都花在如何讨好他上面，人就变得非常紧张。
有时候和权威搞好关系，不仅仅是为了物质福利，也是为了精神寄托，心里的服从感是荣耀和尊严的来源。这一句话就大概解释了国内社会的各种乱象，以及我们深处其中的时候为什么有时候自己也会动作变形。自觉的或者不自觉的去需求依附于权威。
不放松是我的一个问题，在我的研究里这是一个很大的障碍。因为不放松，一根筋地往下想，思想的发散性就不太强，创造性就会受到抑制。我调查时也有这个问题，我不太放松，不太能够调笑戏谑，比较欠缺跟大家打成一片的能力，也是我自己不太满意的地方。
关于是否和某个群体打成一片，我有一个记忆犹新的例子。上大学时候，有一次坐长途绿皮火车，春运的火车车厢挤满了人。我所在的车厢有一群农名工，有一个年轻的小伙子他就属于那种很能和大家打成一片的人，过程中我看着他慢慢的，和比他年长很多的民工们打成一片，作为起码有五六个民工围着他坐成一圈，他仿佛就是那帮人的头。而在10个小时之前，其实他和这帮人并不认识。这个小伙子在我看来就是那种非常放松，能和各种人打成一片的人。而这个打成一片的能力或者我更愿意称之为习惯，和性格是有很强的关系。我也是不习惯和别人打成一片的那种人，多数时刻，我都愿意站在群体外围，看着。
偷窃成为一种不道德的行为，前提是私有财产，如果没有私有财产就没有这个问题。
我们对腐败官员的揭露，却把大量篇幅放在男女关系上，而对这个人究竟怎么贪污、制度设计哪里有问题、贪污造成的具体后果又讲得很虚幻？
项飙老师比较喜欢Joan Baez的音乐，他人分析项飙喜欢的原因是：
她说你喜欢她是因为她的歌没有reference（引经据典），她讲的东西就是东西本身，不会背后还有东西需要你有额外的知识准备去理解。
关于有文革背景的伤痕文学
女知青被村干部奸污这种故事流传了多少年，完全是不成比例的（out of proportion）。奸污当然是犯罪，但那种故事一再流传，背后是有一定意义的，指向的是农民和城市的关系，是一种知青受难的述说。女知青是最纯洁的，结果在农村里被村干部糟蹋，最美的东西被最丑的东西给毁灭掉，文学的叙事结构是很清楚的，是典型的古希腊意义上的悲剧，效果也非常明显。
关于理解
理解是人的本性的一部分，作为心理机制，一点都不难，如果说理解有难度，其实是一个位置问题，看你愿不愿意把自己摆在对方的位置上。很多情况下人们拒绝这么做，因为有利益在里面。
我对知识分子的民粹主义有一种亲近感，比如俄罗斯二月革命等等，我不太知道这是从哪里来的，可能小时候觉得家长权威很重要，所以也形成了对权威的逆反，一切掌握权威的人，我看着都不太舒服。这个心理比较复杂，我没法自己分析，但我相信童年无意识的心态还是能够塑造人情绪上的驱动。我又肯定不会是革命者，因为在很多情况下我比较怯懦，在这个意义上我是比较典型的小资产阶级式的民粹主义。
关于美国反越战运动
美国的孩子们上街是因为他们明天可能就要上战场，会考虑战争的意义，要保护自己的生命
关于78年的高考
对农民来讲，恢复不恢复高考，对当时90%的农民来讲影响不大，但是恢复高考把此前的官僚和城市知识分子一下子拢进来，其实是一个政党和当时社会主义体制下的精英的重新联盟。大学当然是搞精英主义，你看现在回忆恢复高考的人，很多都是干部子弟，从农村回到城市，不仅恢复了原来比较优越的地位，而且用这种途径在文化、道德上使自己的优越正当化、合法化。
关于国内的生活环境
新家庭主义，中国式逼婚，一定要生小孩，一定要买房子，跟这种单一化联系到一起。正因为“悬浮”之后，自己当下的行为本身不能产生意义，就有点原教旨主义，家里那点事儿成了人生唯一的意义寄托。
“认命不认输”也是一样。我们为什么会焦虑，最直接的原因就是对今天没有清晰的认识，总觉得自己现在所处的地方不对，和自己认为的有差距。
项飙老师作为人类学家，观点很犀利，描述问题很根本，同时为人又非常自省。</p>
  </div>
  <footer class="entry-footer"><span title='2022-05-15 16:48:20 +0000 UTC'>May 15, 2022</span></footer>
  <a class="entry-link" aria-label="post link to 《把自己作为方法》读书笔记" href="/posts/bazijizuoweifangfa/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>Debug 和 Debugger
    </h2>
  </header>
  <div class="entry-content">
    <p>Debug 全靠 print 刚毕业之后的第二年，我从事过一份编程工作，主要是要把iOS的程序运行在android上。那是2012年，当时android的toolchain，特别是android ndk develop 方面的工具，还没那么完备。加上我们当时做的项目非常小众，debug运行在android手机上的OC程序，remote debugger经常会connect不上，gdb经常用不了。而即便connect上，诸如breakpoint，单步，程序调用堆栈这些，也不太灵。所以当时最朴素的做法就是通过log，print各种信息来做debug。
可想而知，这种方式来做开发效率是很低的。虽然我也不是很喜欢诸如xcode，android studio等一类IDE（因为他们太笨重了），但只能靠print来debug，确实有点过于原始了。开发工具不完备，研发效率不高，最终项目研发也是困难重重，很难有效推进。
学习编程 我大学在一所末流211读的计算机相关专业。拙劣的教学质量，松散的学习氛围，加上唐浩强系列教材，大学里是没学到什么编程能力的。工作中的编程能力基本上靠自学而成。自学过程中有点像debug一段程序的过程，通常情况下，我会找相关的资料先看看，当然一般情况下有些细节在没有人指导的情况下，是看不太懂的。而后是去网上找一些视频，去看看视频教学。过程中有一点非常重要，就是要看完一段之后文字和视频之后，阶段性一定要动手去做。这样才能比较有效率的学习某一项新的编程技能。我自己反复验证过，一上来就蛮干，什么书也不看，教程也不学，就自己摸索，大概率是要失败而归，自信心受挫的同时人的精力也被耗尽。而有时候我自己会犯懒，看看书，看看视频，就觉得自己搞懂了，学会了，当时是会比较轻松，但程序员这项工作，最终是要靠code说话的，光看不写，99%是没有学会，即便懂了，最终也不会操作。
如果说编辑器，编译器是程序员的朋友，那么debugger可以说是程序员的再生父母。绝大多数程序员离开了debugger是几乎不会写代码的。狭义的debugger指的是程序调试工具，广义的debugger可以指的是好的书籍，资料，人，工具等等能给你有效反馈的事和物。当我在学习一项新技能的时候，最为关键的是要找到靠谱的debugger，然后勤加debug，可能过程听起来会比较累，但根据自身经验来看，这种方式是最为节约时间的方式方法。
Keep Try and Practice.</p>
  </div>
  <footer class="entry-footer"><span title='2022-05-08 01:03:32 +0000 UTC'>May 8, 2022</span></footer>
  <a class="entry-link" aria-label="post link to Debug 和 Debugger" href="/posts/debug-and-debugger/"></a>
</article>

<article class="post-entry"> 
  <header class="entry-header">
    <h2>自由泳二踢腿
    </h2>
  </header>
  <div class="entry-content">
    <p>18年夏天，有一次我从深圳的蛇口码头坐船去香港机场，船上坐在我旁边有两个男性，一个中年人和一个青年人，听口音应该是台湾人。听聊天的内容，两个人大概是在芯片公司工作，中年人是青年人的leader。聊的内容我记不清了，倒是中年人有一句话，我一直有映像：人都是可以被训练的。
根据这几年在上海各种大小游泳馆里面游泳时候的观察，会发现几个现象，第一是游泳馆里面中老年人很多，多数时候，场子里面有超过6成是老年人。这个现象一方面也反映了上海处于一个社会人口老年化的局面。另外一个现象是多数人采用的泳姿是蛙泳，采用自由泳游长距离的人非常少。根据我自己的经验，多数人在游自由泳的时候，手脚高频摆动，一启动中间不会停歇，游个25米就会气喘吁吁，非常的累。所以在游泳馆里面我们会见到那种蛙泳游几个来回，然后搭配一个自由泳，企图增加点运动量的人。
很长时间以来，我去游泳，也是采用蛙泳，直到有一天我在B站上看到了一条关于自由泳二踢腿的视频。他让我第一次感受到游泳这项运动的美感，或者说在这种二踢腿动作下，运动员人体形态呈现出来的那种优雅。 从视频中运动员的动作频率来看，二踢腿形式下的自由泳，动作看起来频率没那么高频，中间会有一些停顿，看起来是适合游长距离的。因为它呈现出来的优雅，我对这种游泳方式产生了兴趣，接下来在YouTube，B站搜索了一些关于自由泳二踢腿（two beat kick freestyle）的视频，学习了这个动作的一些要点之后，就动身去游泳馆试验了。 第一次去的时候，当然是没有成功用二踢腿的方式游起来。当我尝试在水中做二踢腿动作的时候，看视频时觉得学会了的简单动作，在水里面做起来就不会了，准确的说是缺失了很多细节，从动作1到动作2中间动作是什么？踢腿的时候，是该同侧手，还是对侧手往前滑？等等这些细节在看视频脑子记动作的时候是缺失的。 第二周去之前，根据上次的实践反馈，反复观看其中一些比较模糊的动作。第二次下水尝试二踢腿游的时候，还是失败了，而且并没有比第一次好多少。回来之后，又对着视频观看，回忆在水里的情形去做复盘。大概在第三，四次的时候，我可以用二踢腿的方式游起来了。但游起来并不熟练，动作有时候会很别扭。后来我又去游了几次，慢慢的可以用二踢腿自由泳的方式游个1km不停歇。疫情之前的几次游泳，我已经可以熟练的进行二踢腿自由泳了，过程中我反而觉得蛙泳比自由泳更费力一些。
多数人在学会蛙泳之后，就停滞了，因为蛙泳的确够用，能起到体育锻炼和娱乐的作用。多数人自由泳游起来非常累，在没有合适的，优质的信息引导下，累引发的抗拒感，就会让人丧失掉优化自由游动作的动力，失去探索自由游的兴趣。如果B站没有推送给我那一条视频，我可能至今都不知道二踢腿自由泳。
过往，在我的成长环境里，大家最关注的是这孩子是不是聪明，这孩子的天分如何？我以往虽不是完全同意这种观点，但本质上我很多时候也是拿这种评价标准来评价自己。这种做法导致多数时候以卵击石，得出自己能力不够，没有天分的结论。自信心受挫的同时，也比较容易半途而废。学会自由泳二踢腿有两个关键点，第一是B站的视频推荐，第二是反复的尝试和练习。二者缺一不可，我们不能让一个从来没看过专业的自由泳二踢腿怎么游的人即刻学会它，更不能期待我们自己能发明创造这种游泳方式。
同理，我们也不能要求自己在没有任何准备下，就能解决某类问题（比如投资，编程）。我们不是爱因斯坦，也不是乔布斯，不要用天才的标准来评价自己。多数时刻，我们不要期望自己在一无所知的情况下，就能凭天分在短时间内凭个人去发现人类历史发展多年先人们总结的经验和方法。我们应该为自己创造一个合适的环境，去让自己接触到更多更好的信息，去触碰到更高质量的内容，同时多练习，和复盘。不要给自己定义做不到，此刻的做不到，要么是方法不对，要么练习不够。找到正确的方法，不要丧失信心，边想边做，多数事情我们都可以掌握。人都是可以被训练的。</p>
  </div>
  <footer class="entry-footer"><span title='2022-05-03 12:07:10 +0000 UTC'>May 3, 2022</span></footer>
  <a class="entry-link" aria-label="post link to 自由泳二踢腿" href="/posts/2-beat-kick-freestyle/"></a>
</article>
<footer class="page-footer">
  <nav class="pagination">
    <a class="prev" href="/posts/">
      «&nbsp;Prev&nbsp;
    </a>
    <a class="next" href="/posts/page/3/">Next&nbsp;&nbsp;»
    </a>
  </nav>
</footer>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href=""></a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
